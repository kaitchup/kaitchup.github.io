---
title: BM49 表达式求值
date: 2023-11-15 15:19:13
tags:
---
牛客网的在线编程题 [BM49 表达式求值](https://www.nowcoder.com/practice/c215ba61c8b1443b996351df929dc4d4?tpId=295&tqId=1076787&ru=/exam/oj&qru=/ta/format-top101/question-ranking&sourceUrl=%2Fexam%2Foj)

## BM49 表达式求值

### 描述
请写一个整数计算器，支持加减乘三种运算和括号。

数据范围：0 <= |s| <= 100, 保证计算结果始终在整形范围内, s 代表每一项的数字

要求：空间复杂度：O(n), 时间复杂度 O(n)

### 示例1
````
输入："1+2"
返回值：3
````

### 示例2
````
输入: "(2*(3-4))*5"
返回值: -10
````

### 示例3
````
输入: "3+2*3*4-1"
返回值: 26
````

### 解析
这道题可以使用双栈法来解，一个栈 nums 用来存放数字，第二个栈 ops 用来存放操作符。

以示例1为例进行模拟，当输入 1 的时候，读取 1 并放入数字栈，然后读取 + 号，ops 中没有值，将 + 号放入栈中

读到 2 时，将 2 推入 nums, 然后读取到 ; 号结束(这里的分号是预先添加的), ops 中有 + 号，对 nums 弹出 2 个数进行加法运算

得到结果 3


以示例2为例进行模拟，输入 \( 的时候, 读取 \( 并放入操作符栈，然后 ..., 当读取到第一个 \) 的时候, 对 nums 最后两个数弹出进行

运算，并将计算的结果压入 num 中，此时操作符最后一个是 \( 与当前 \) 匹配，同时也进行弹出, 读取到下一个操作符是 * 号，与当前

操作符 * 优先级相同，对 nums 最后两个数进行乘法运算，计算结果压入栈中 ... 之后的操作与示例1相同

得到结果 -10

### 代码
````
TODO 第一次写的不够优雅，2023-11-18 进行重构
````